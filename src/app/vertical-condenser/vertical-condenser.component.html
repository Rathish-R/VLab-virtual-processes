<mat-tab-group>
    <mat-tab label="Theory">
        <br>
        <h2>Objective</h2>
        <p class="Theory"> To determine the overall Heat transfer coefficient of the given Condenser </p><br>
        <h2>Theory </h2>
        <p class="Theory">

            a condenser is a heat exchanger used to condense a gaseous substance into a liquid state through cooling. In so doing, the latent heat is released by the substance and transferred to the surrounding environment. Condensers are used for efficient heat rejection in many industrial systems. Condensers can be made according to numerous designs, and come in many sizes ranging from rather small (hand-held) to very large (industrial-scale units used in plant processes). 
            <br>
            <br>
            <br>
            <img class="rounded mx-auto d-block"
                src="https://www.researchgate.net/publication/50384285/figure/fig1/AS:650799378100225@1532174071339/Experimental-Setup-of-Heat-Exchanger.png"
                style="width:fit-content;height: fit-content;">
        </p>

    </mat-tab>
    <mat-tab label="Formulae" color="Accent">

        <div class="formulae" style="margin-top: 5%;font-size: large;letter-spacing: 2.5;">
            <div class="row">
                <div class="col-8">
                    <h4 style="font-weight: 600;"> Overall energy balance :</h4>
                    <p>
                        Q <sub>h</sub>C<sub>p</sub>(T<sub>Hin</sub> - T<sub>Hout</sub>) =m<sub>c</sub>
                        C<sub>p</sub>(T<sub>Cin</sub> - T<sub>Cout</sub>)
                        <br>

                        Q = UA ΔT<sub>LMTD</sub>
                    </p>
                    <h4 style="font-weight: 600;"> Overall Heat Transfer Coefficient :</h4>
                    <p> 1/U = (1/H<sub>o</sub>) + (1/H<sub>od</sub>) +((d<sub>o</sub>/d<sub>i</sub>) X 1/H<sub>i</sub>)
                        +((d<sub>o</sub>/d<sub>i</sub>) X 1/H<sub>id</sub>)
                        + d<sub>o</sub>(ln(d<sub>o</sub>/d<sub>i</sub>))/2K<sub>w</sub>
                    <h5 style="font-weight: 600;color: rgba(52, 52, 52, 0.855);">Tube Side Heat Transfer Coefficient
                    </h5>
                    <p>H<sub>i</sub> = J<sub>h</sub> N<sub>RE</sub> N<sub>Pr</sub><sup>0.33</sup>
                        (&mu;/&mu;w)<sup>0.14</sup>
                        (K<sub> f</sub>d<sub>i</sub>)

                    </p>
                    <h5 style="font-weight: 600;color: rgba(52, 52, 52, 0.856);">Shell Side Heat Transfer Coefficient
                    </h5>
                    <p>H<sub>o</sub> = J<sub>f</sub> N<sub>RE</sub> N<sub>Pr</sub><sup>0.33</sup>
                        (&mu;/&mu;w)<sup>0.14</sup>
                        (K<sub> f</sub>d<sub>e</sub>)

                    </p>

                </div>
                <div class="col-4">
                    <p>
                        <b>Q<sub>h</sub></b> - Amount of Heat Transfer(Hot fluid side)<br>
                        <b>Q <sub>c</sub></b> - Amount of Heat Transfer(Cold fluid side)<br>
                        <b>T<sub>hin</sub></b> - Hot Fluid inlet temperature <br>
                        <b>T<sub>hout</sub></b> - Hot Fluid outlet temperature <br>
                        <b>T<sub>cin</sub></b> - Cold Fluid inlet temperature <br>
                        <b>T<sub>cout</sub></b> - Cold Fluid outlet temperature <br>
                        <b>ΔT<sub>LMTD</sub></b>- Log mean temperature difference<br>
                        <b>A</b> - Heat Transfer Area <br>
                        <b>U</b> - Overall Side Heat transfer Coefficient <br>
                        <b>H<sub>i</sub></b> - Tube Side Heat transfer Coefficient <br>
                        <b>H<sub>id</sub></b> - Tube side Heat Transfer(fouling)<br>
                        <b>H<sub>o</sub></b> - Shell Side Heat transfer Coefficient <br>
                        <b>H<sub>od</sub></b> - Sell side Heat Transfer(fouling)<br>
                        <b>N<sub>Re</sub></b> - Reynold's Number<br>
                        <b>N<sub>Pr</sub></b> - Prandtl's Number<br>
                    </p>
                </div>
            </div>
        </div>


    </mat-tab>
    <mat-tab label="Simulation">


        <div style="margin:5% 20%;">
            <form [formGroup]="ip">

                <table class="table table-hover table-striped mat-elevation-z8">
                    <thead>
                        <tr>
                            <th>Property</th>
                            <th>Value</th>
                            <th>Units</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Assumed HT Coefficient U</td>
                            <td>
                                <select formControlName="HeatTransferCoeffAssumed">
                                    <option value="800">800</option>
                                    <option value="900">900</option>
                                    <option value="1000">1000</option>
                                    <option value="1100">1200</option>
                                    <option value="1200">1200</option>
                                </select>
                            </td>
                            <td> W/m<sup>2</sup>&deg;C </td>
                        </tr>
                       

                        <tr>
                            <td>Tube's Outside diameter</td>
                            <td>
                                <input type="number" formControlName="TubeDiaO">
                            </td>
                            <td> m </td>
                        </tr>
                        <tr>
                            <td>Tube's Inside diameter</td>
                            <td>
                                <input type="number" formControlName="TubeDiaI">
                            </td>
                            <td> m </td>
                        </tr>
                        <tr>
                            <td>Tube's Length</td>
                            <td>
                                <input type="number" formControlName="L">
                            </td>
                            <td> m </td>
                        </tr>
                  
                        <tr>
                            <td> Mass Flowrate (Vapour)</td>
                            <td><input type="number" formControlName="VapFlowRate"></td>
                            <td>
                                <select formControlName="OilFRUnit">
                                    <option value="Kg/sec">Kg/sec</option>
                                    <option value="Kg/hr">Kg/Hrs</option>
                                    <option value="Kg/min">Kg/min</option>
                                    <option value="l/hr" disabled>l/hr</option>
                                    <option value="l/min" disabled>l/hr</option>
                                    <option value="l/sec" disabled>l/hr</option>
                                </select>
                            </td>
                        </tr>
    
                        <tr>
                            <td>Mass Flowrate (Water)</td>
    
                            <td><input type="number" formControlName="Waterflowrate"></td>
                            <td> <select formControlName="WaterFRUnit">
                                    <option value="Kg/sec">Kg/sec</option>
                                    <option value="Kg/hr">Kg/hr</option>
                                    <option value="Kg/min">Kg/min</option>
                                    <option value="l/hr" disabled>l/hr</option>
                                    <option value="l/min" disabled>l/hr</option>
                                    <option value="l/sec" disabled>l/hr</option>
                                </select></td>
                        </tr>
    
                        <tr>
                            <td>HotFluid Inlet temperature</td>
                            <td><input type="number" formControlName="Thi"></td>
                            <td>&deg;C</td>
                        </tr>
                        <tr>
                            <td>Cold fluid inlet temperature</td>
    
                            <td><input type="number" formControlName="Tci"></td>
                            <td>&deg;C</td>
                        </tr>
                        <tr>
    
                            <td>Cold fluid Outlet temperature (Desired)</td>
                            <td><input type="number" formControlName="Tco"></td>
                            <td>&deg;C</td>
                        </tr>
                        <tr>
    
                            <td>Hot fluid Outlet temperature (Desired)</td>
                            <td><input type="number" formControlName="Tho"></td>
                            <td>&deg;C</td>
                        </tr>
                      
                    </tbody>
                </table>
                <button class="btn btn-success" type="submit" [disabled]="!ip.valid" (click)="onSubmit()">submit</button>
                <div *ngIf="ip.invalid && ip.dirty" style="color: red">All fields are
                    required.</div>
                <div *ngIf="ip.valid && !this.v.isCalculated" style="color: rgb(4, 255, 0)">Ready to calculate</div>
            </form>
        </div>
    </mat-tab>

    <mat-tab label="Result">
        <div *ngIf="v.isCalculated">
            <table class="table table-hover table-striped table-striped mat-elevation-z8">
                <thead>
                    <tr>
                        <th>Property</th>
                        <th>Value</th>
                        <th>Units</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td> LMTD </td>

                        <td>{{this.v.lmtd}}</td>
                        <td>&deg;C </td>
                    </tr>
                    <tr>
                        <td> Heat Duty Q (shell) </td>

                        <td>{{this.v.QShellSide}}</td>
                        <td>W</td>
                    </tr>
                    <tr>
                        <td> Heat Transfer Area (Shell)</td>

                        <td>{{this.v.HtArea}}</td>
                        <td>m<sup>2</sup></td>
                    </tr>
                    <tr>
                        <td> Number of Tubes </td>

                        <td>{{this.v.Tubes}}</td>
                        <td> NA </td>
                    </tr>
                    <tr>
                        <td> Bundle Diameter </td>

                        <td>{{this.v.BundleDia}}</td>
                        <td> m </td>
                    </tr>
                    <tr>
                        <td> Shell Diameter </td>

                        <td>{{this.v.ShellDia}}</td>
                        <td> m </td>
                    </tr>
                    <tr>
                        <td> Tubes Per Pass </td>

                        <td>{{this.v.TubesPerPass}}</td>
                        <td> m </td>
                    </tr>
                    <tr>
                        <td>Total Flow area(Tubes)</td>

                        <td>{{this.v.FlowAreaOfTubes}}</td>
                        <td> m<sup>2</sup> </td>
                    </tr>
                    <tr>
                        <td>Velocity(Tube side fluid)</td>

                        <td>{{this.v.VelocityTubeSide}}</td>
                        <td> m/s </td>
                    </tr>
                  
                    <tr>
                        <td>Tube Side HeatTransfer Coefficient</td>

                        <td>{{this.v.HtubeSide}}</td>
                        <td>W/m<sup>2</sup>&deg;C </td>
                    </tr>
                    <tr>
                        <td>Tube Bundle HeatTransfer Coefficient</td>

                        <td>{{this.v.HTubeBundle}}</td>
                        <td> W/m<sup>2</sup>&deg;C </td>
                    </tr>
                    <tr>
                        <td>Overall HeatTransfer Coefficient</td>

                        <td>{{this.v.OverallHTCoeff}}</td>
                        <td> W/m<sup>2</sup>&deg;C </td>
                    </tr>
                    <tr>
                        <td>Tube side Pressure Drop</td>

                        <td>{{this.v.PDropTs}}</td>
                        <td>Psi</td>
                    </tr>
                    <tr>
                        <td>Shell side Pressure Drop</td>

                        <td>{{this.v.PDropSs}}</td>
                        <td>Psi</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div *ngIf="!this.v.isCalculated">
            <div class="alert-warning" style="padding:20px">
                <h3>Cannot generate results</h3>
                <h6>Simulate to get results</h6>
            </div>
        </div>
    </mat-tab>
    <mat-tab label="Virtual Experiment">
        <form [formGroup]="ip">
            <table mat-table class="table table-bordered table-striped mat-elevation-z8">
                <thead>
                    <tr>
                        <th>Property</th>
                        <th>Value</th>
                        <th>Units</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td> Mass Flowrate (Methanol)</td>
                        <td><input type="number" formControlName="OilFlowRate"></td>
                        <td>
                            <select formControlName="OilFRUnit">
                                <option value="Kg/sec">Kg/sec</option>
                                <option value="Kg/hr">Kg/Hrs</option>
                                <option value="Kg/min">Kg/min</option>
                                <option value="l/hr" disabled>l/hr</option>
                                <option value="l/min" disabled>l/hr</option>
                                <option value="l/sec" disabled>l/hr</option>
                            </select>
                        </td>
                    </tr>

                    <tr>
                        <td>Mass Flowrate (Water)</td>

                        <td><input type="number" formControlName="Waterflowrate"></td>
                        <td> <select formControlName="WaterFRUnit">
                                <option value="Kg/sec">Kg/sec</option>
                                <option value="Kg/hr">Kg/hr</option>
                                <option value="Kg/min">Kg/min</option>
                                <option value="l/hr" disabled>l/hr</option>
                                <option value="l/min" disabled>l/hr</option>
                                <option value="l/sec" disabled>l/hr</option>
                            </select></td>
                    </tr>

                    <tr>
                        <td>HotFluid Inlet temperature</td>
                        <td><input type="number" formControlName="Thi"></td>
                        <td>&deg;C</td>
                    </tr>
                    <tr>
                        <td>Cold fluid inlet temperature</td>

                        <td><input type="number" formControlName="Tci"></td>
                        <td>&deg;C</td>
                    </tr>
                     <tr>
    
                            <td>Cold fluid Outlet temperature (Desired)</td>
                            <td><input type="number" formControlName="Tco"></td>
                            <td>&deg;C</td>
                        </tr>
                        <tr>
    
                            <td>Hot fluid Outlet temperature (Desired)</td>
                            <td><input type="number" formControlName="Tho"></td>
                            <td>&deg;C</td>
                        </tr>
                    <tr>
                        <td> Obtained Overall Heat Temperature Coefficient - U</td>

                        <td>{{this.v.OverallHTCoeff}}</td>
                        <td>W/m<sup>2</sup> &deg;C</td>
                    </tr>

                    <tr>
                        <td> Obtained Heat Duty - Q</td>

                        <td>{{this.v.QFound/1000}}</td>
                        <td>KW</td>
                    </tr>
                    <tr>
                        <td> Hot Fluid Outlet temperature - THo</td>

                        <td>{{this.v.Tho}}</td>
                        <td> &deg;C</td>
                    </tr>
                    <tr>
                        <td> Cold Fluid Outlet temperature - TCo</td>

                        <td>{{this.v.Tco}}</td>
                        <td> &deg;C</td>
                    </tr>

                </tbody>
            </table>
            <button class="btn btn-success" type="submit" [disabled]="!ip.valid" (click)="onSubmit()">submit</button>
            <div *ngIf="ip.invalid && ip.dirty" style="color: red">All fields are
                required.</div>
            <div *ngIf="ip.valid && !this.v.isCalculated" style="color: rgb(4, 255, 0)">Ready to calculate</div>
        </form>
        <div class="image">
            <div class="Tco" style="position:absolute;top:5;left:3">{{this.v.Tco}}</div>
            <div class="Tho">{{this.v.Tho}}</div>

            <img class="rounded mx-auto d-block"
                src="https://www.researchgate.net/publication/50384285/figure/fig1/AS:650799378100225@1532174071339/Experimental-Setup-of-Heat-Exchanger.png"
                alt="Shell And TUbe Heat Exchanger" style="height:30%;width:30%">
        </div>

        <div *ngIf="logs.length==0">
            <h2>No Data To display !</h2>
        </div>
        <div *ngIf="logs.length!=0">
            <h2 style="text-align:center;"><i class="bi bi-card-list"></i> Logs </h2>
            <table mat-table class="table table-bordered " style="margin:10px">
                <thead>
                    <tr>
                        <th>Mass Flowrate -methanol</th>
                        <th>Mass Flowrate -water</th>
                        <th>Hot Fluid inlet Temperature </th>
                        <th>Cold Fluid inlet Temperature </th>
                        <th>Hot Fluid outlet Temperature </th>
                        <th>Cold Fluid outlet Temperature </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let i of logs">
                        <td>
                            {{i['Mh']}}
                        </td>
                        <td>
                            {{i['Mc']}}
                        </td>
                        <td>
                            {{i['Thi']}}
                        </td>
                        <td>
                            {{i['Tci']}}
                        </td>
                        <td>
                            {{i['Tho']}}
                        </td>
                        <td>
                            {{i['Tco']}}
                        </td>
                    </tr>
                </tbody>
            </table>


        </div>
    </mat-tab>
</mat-tab-group>
<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="errorModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="errorModalLabel">Error</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div *ngIf=""></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
